
@{
    ViewBag.Title = "Retailers";
    Layout = "~/Views/Shared/ContentLayout.cshtml";
}

<style type="text/css">
    /* Style The Dropdown Button */
    .searchmenubtn {
        color: white;
        padding: 13px;
        font-size: 16px;
        border: none;
        cursor: pointer;
        border: 1px !important;
        border-color: black !important;
    }

    /* The container <div> - needed to position the dropdown content */
    .searchmenu {
        position: relative;
        display: inline-block;
        border: 1px !important;
        border-color: black !important;
        z-index: 999;
    }

    /* Dropdown Content (Hidden by Default) */
    .searchmenu-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        top: 2.8em;
    }

        /* Links inside the dropdown */
        .searchmenu-content a {
            top: 1em;
            height: 20px !important;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            font-size: 13px !important;
            font-weight: normal !important;
            color: black;
            text-decoration: none !important;
            display: block;
        }

            /* Change color of dropdown links on hover */
            .searchmenu-content a:hover {
                top: -5px;
                background-color: #BCD8F3 !important;
                color: #800909 !important;
            }

    /* Show the dropdown menu on hover */
    .searchmenu:hover .searchmenu-content {
        display: block;
        margin-top: -10px;
    }

    .searchmenu-content:after {
        top: -7px;
        content: " ";
        left: 6%;
        position: absolute;
        width: 10px;
        height: 9px;
        border-right: 2px solid #0866c6;
        border-bottom: 2px solid #0866c6;
        background: white;
        transform: rotate(222deg);
    }

    /* Change the background color of the dropdown button when the dropdown content is shown */
    .searchmenu:hover .searchmenubtn {
    }

    .nallowed {
   cursor: not-allowed;
}
.event-none {
    pointer-events: none!important;
}

</style>
<style type="text/css">
    .ui-datepicker-year {
        width: 80px !important;
    }

    .ui-datepicker-month {
        width: 70px !important;
    }

    #ui-datepicker-div {
        z-index: 2000 !important;
        width: 223px;
    }

    .ui-datepicker-calendar thead {
        width: 100% !important;
    }

    .ui-datepicker-calendar tbody {
        overflow-y: overlay;
        width: 100% !important;
    }

    .textbox_size {
        width: 30%;
    }

    .combobox_size {
        width: 32%;
    }
</style>


<script type="text/javascript">
    var search;
    var blurevent = false;
    var dblclick = false;
    var Distfield = "";
    var Distfield_header = "";
    var RCorpNo = "";
    var RetailerNo;
    $(document).ready(function () {

        Retailer = new viewModel();
        search = Retailer;
        ko.applyBindings(Retailer);

        $("#btnAdd").click({ handler: Retailer.Add });
        $("#btnEdit").click({ handler: Retailer.Edit });
        $("#btnSave").click({ handler: Retailer.Save });
        $("#btnDelete").click({ handler: Retailer.Delete });
        $("#btnCancel").click({ handler: Retailer.Cancel });

        //Contacts Screen
        $("#RetCont").click(function () {
            $("#iContacts").contents().find("body").html('');
            document.getElementById('iContacts').src = "RetailersContacts";
        });

        //Notes Screen
        $("#Notes").click(function () {
            $("#inotes").contents().find("body").html('');
            document.getElementById('inotes').src = "Notes?No=" + document.getElementById('RetailerNo').value + "&ScreenName=Retailer";
        });
        $("#TerminatedDate").datepicker({ dateFormat: 'mm/dd/yy', changeMonth: true, changeYear: true });
        $("#Member").datepicker({ dateFormat: 'mm/dd/yy', changeMonth: true, changeYear: true });

    });

    function viewModel() {

        var self = this;
        RCorpNo = "@ViewBag.RCorpNo";
        self.AddMode = ko.observable(false);
        self.EditMode = ko.observable(true);
        self.SaveMode = ko.observable(false);
        self.EnableDisableMode = ko.observable(true);
        self.EnableDisableControls = ko.observable(false);

        self.txtRetailNo = ko.observable(RCorpNo);
        self.txtname = ko.observable();
        self.txtsearch = ko.observable();
        self.selectedvalue = ko.observable();
        self.txtOldRatailerNo = ko.observable();
        self.txtRatailerNo = ko.observable();

        self.CmbRetailersrch = ko.observableArray([]);
        self.CmbCountry = ko.observableArray([]);
        self.Cmbtype = ko.observableArray([]);
        self.Cmbcode = ko.observableArray([]);
        self.CmbScountry = ko.observableArray([]);
        self.CmbShrEmail = ko.observableArray([]);
        self.Cmbcommvia = ko.observableArray([]);
        //self.CmbCoorporate = ko.observableArray([]);
        self.CmbDistributor = ko.observableArray([]);
        self.BinddistList = ko.observable();
        self.hdnDistList = ko.observableArray([]);

        self.Oldgwno = ko.observable();
        self.RetailerNo = ko.observable();
        self.company = ko.observable();
        self.address1 = ko.observable();
        self.city = ko.observable();
        self.state = ko.observable();
        self.zip = ko.observable();
        self.country = ko.observable();
        self.phone = ko.observable();
        self.fax = ko.observable();
        self.email = ko.observable();
        self.www = ko.observable();
        self.corpname = ko.observable();
        self.saddress1 = ko.observable();
        self.scity = ko.observable();
        self.sstate = ko.observable();
        self.szip = ko.observable();
        self.scountry = ko.observable();
        //self.RCorpNo = ko.observable();
        self.DistNo = ko.observable();
        self.fedid_tax = ko.observable();
        //self.code = ko.observable();
        self.typeco = ko.observable();
        self.mbrsince = ko.observable();
        self.primary_ = ko.observable();
        //self.terminated = ko.observable();
        self.dateterm = ko.observable();
        self.gsplus = ko.observable();
        self.emailshr = ko.observable();
        self.comm_via = ko.observable();

        self.QueryFilter = ko.observable("");

        self.selectedvalue("company");
        self.txtname("Company");

        CallEnableTabs();

        $("#lblemail").live("click", function () {
            send_email(self.email());
        });

        $.ajax({
            url: "FillSearchComboList",
            type: "POST",
            data: { ScreenFrom: 'Retailers', FormClass: 'Retailers' },
            success: function (response) {
                Distfield_header = "", Distfield = "";
                var fld = "", desc = "";

                if (response.Items.length > 0) {
                    self.CmbRetailersrch(response.Items);
                    for (var i = 0; i < response.Items.length; i++) {
                        desc += response.Items[i].Display_FName + ",";
                        fld += response.Items[i].Field_Name + ",";
                    }
                    Distfield_header = desc.replace(/,\s*$/, "");
                    Distfield = fld.replace(/,\s*$/, "");
                }
                else {
                    Distfield = "company,RetailerNo,Oldgwno,city,state,country,zip,phone,email";
                    Distfield_header = "Company,Retailer No,Old Gwno,City,State,Country,Zip,Phone,Email";

                    var StaticHeadercmbo = "company-Company,RetailerNo-Retailer No,Oldgwno-Old Gwno,city-City,state-State,country-Country,zip-Zip,phone-Phone,email-Email";
                    var Comboheadsplit = StaticHeadercmbo.split(",");
                    var ComboArray = []
                    for (var i = 0; i < Comboheadsplit.length; i++) {
                        var Splitdesc = "";
                        Splitdesc = Comboheadsplit[i].split("-");
                        ComboArray.push({
                            Field_Name: Splitdesc[0],
                            Display_FName: Splitdesc[1]
                        });
                    }
                    self.CmbRetailersrch(ComboArray);
                }
            }
        });

        $.ajax({
            url: "GetLookupList",
            data: { LukpID: 'comp' },
            type: "POST",
            async: false,
            success: function (response) {
                self.Cmbtype(response.Items);
            }
        });

        $.ajax({
            url: "GetLookupList",
            data: { LukpID: 'PrimaryCode' },
            type: "POST",
            async: false,
            success: function (response) {
                self.Cmbcode(response.Items);
            }
        });

        $.ajax({
            url: "GetLookupList",
            data: { LukpID: 'CNTRY' },
            type: "POST",
            async: false,
            success: function (response) {
                self.CmbCountry(response.Items);
                self.CmbScountry(response.Items);
            }
        });

        $.ajax({
            url: "GetLookupList",
            data: { LukpID: 'EMAILSHR' },
            type: "POST",
            async: false,
            success: function (response) {
                self.CmbShrEmail(response.Items);
            }
        });

        $.ajax({
            url: "GetLookupList",
            data: { LukpID: 'COMMVIA' },
            type: "POST",
            async: false,
            success: function (response) {
                self.Cmbcommvia(response.Items);
            }
        });

        //$.ajax({
        //    url: "CoorporateCombo",
        //    type: "POST",
        //    async: false,
        //    success: function (response) {
        //        self.CmbCoorporate(response.Items);
        //    }
        //});

        $.ajax({
            url: "DistributorCombo",
            type: "POST",
            async: false,
            success: function (response) {
                self.CmbDistributor(response.Items);
            }
        });

        self.Retailsearchdbclick = function () {
            if (blurevent == true) {
                blurevent = false;
                return false;
            }
            dblclick = true;
            self.txtsearch(document.getElementById('Retailsearch').value);
            if (self.txtsearch() == null || self.txtsearch() == "")
                self.txtsearch("%");

            $.ajax({
                url: "OpSearchList",
                type: "POST",
                data: { searchtable: 'Retailer', searchtext: self.txtsearch(), selectedvalue: self.selectedvalue() },
                success: function (response) {
                    if (response.Items.length == 1) {
                        self.BinddistList(response.Items[0]);
                        $("a#webpageLink").attr("href", "http://" + self.www());
                        if (self.www() != "") {
                            $("#webpageLink").show();
                            $("#www").hide();
                        }
                        else {
                            $("#webpageLink").hide();
                            $("#www").show();
                        }
                    }
                    else {
                        var searchtext = self.txtsearch();
                        if (searchtext.indexOf('&') >= 0) { searchtext = searchtext.replace(/\&/g, 'amp;'); }
                        window.parent.document.getElementById('searchscreen').src = "../GroGroup/SearchScreen?element=txtRetailsrch&table=Retailer&field=" + Distfield + "&header=" + Distfield_header + "&text=" + searchtext + "&where=" + self.selectedvalue() + "&LabelDescription=Retailer ";
                        fireEvent(window.parent.document.getElementById('sc1'), 'click');
                    }
                    self.txtsearch("");
                }
            });
        }

        self.txtRetailsearch = function () {
            if (dblclick == true) {
                dblclick = false;
                return false;
            }
            blurevent = true;
            self.txtsearch(document.getElementById('Retailsearch').value);
            if (self.txtsearch() == null || self.txtsearch() == "") {
                return false;
            }

            $.ajax({
                url: "OpSearchList",
                type: "POST",
                data: { searchtable: 'Retailer', searchtext: self.txtsearch(), selectedvalue: self.selectedvalue() },
                success: function (response) {
                    if (response.Items.length == 1) {
                        self.BinddistList(response.Items[0]);
                        $("a#webpageLink").attr("href", "http://" + self.www());
                        if (self.www() != "") {
                            $("#webpageLink").show();
                            $("#www").hide();
                        }
                        else {
                            $("#webpageLink").hide();
                            $("#www").show();
                        }
                    }
                    else {
                        var searchtext = self.txtsearch();
                        if (searchtext.indexOf('&') >= 0) { searchtext = searchtext.replace(/\&/g, 'amp;'); }
                        window.parent.document.getElementById('searchscreen').src = "../GroGroup/SearchScreen?element=txtRetailsrch&table=Retailer&field=" + Distfield + "&header=" + Distfield_header + "&text=" + searchtext + "&where=" + self.selectedvalue() + "&LabelDescription=Retailer";
                        fireEvent(window.parent.document.getElementById('sc1'), 'click');
                    }
                    self.txtsearch("");
                    blurevent = false;
                }
            });
        }


        function FillRetailer() {
            $.ajax({
                url: "FillRetailerGrid",
                data: { GwNo: self.txtRetailNo() },
                type: "POST",
                success: function (response) {
                    self.BinddistList(response.Items[0]);
                    //if (self.terminated() == "True") {
                    //    document.getElementById("Terminated").checked = true;
                    //} else {
                    //    document.getElementById("Terminated").checked = false;
                    //}
                    if (self.gsplus() == "True") {
                        document.getElementById("GroSource").checked = true;
                    } else {
                        document.getElementById("GroSource").checked = false;
                    }
                    $("a#webpageLink").attr("href", "http://" + self.www());
                    if (self.www() != "") {
                        $("#webpageLink").show();
                        $("#www").hide();
                    }
                    else {
                        $("#webpageLink").hide();
                        $("#www").show();
                    }
                }
            });
        }

        FillRetailer();

        self.BinddistList = function (item) {
            if (item != undefined) {
                if (self.SaveMode() == true)
                    return false;
                self.Oldgwno(item.Oldgwno);
                RetailerNo = item.RetailerNo;
                self.RetailerNo(item.RetailerNo);
                self.company(item.company);
                self.address1(item.address1);
                self.city(item.city);
                self.state(item.state.trim());
                self.zip(item.zip);
                self.country(item.country);
                self.phone(item.phone);
                self.fax(item.fax);
                self.email(item.email);
                self.www(item.www);
                self.corpname(item.corpname);
                self.saddress1(item.saddress1);
               
                self.scity(item.scity);
                self.sstate(item.sstate.trim());
                self.szip(item.szip);
                self.scountry(item.scountry);
                //self.RCorpNo(item.RCorpNo);
                self.DistNo(item.DistNo);
                self.fedid_tax(item.fedid_tax);
                //self.code(item.code.trim());
                self.typeco(item.typeco);
                if (item.primary_ != null && item.primary_.trim() != "")
                    self.primary_(item.primary_);
                else
                    self.primary_(item.primary_.trim());
                self.gsplus(item.gsplus);
                self.emailshr(item.emailshr);
                self.comm_via(item.comm_via);

                self.QueryFilter(item.QueryFilter.trim());
                if (item.email != null && item.email != "") {
                    $("#lblemail").css("color", "blue");
                    $("#lblemail").css("cursor", "pointer");
                    $("#lblemail").css("text-decoration", "underline");

                }
                else {
                    $("#lblemail").css("color", "#333333");
                    $("#lblemail").css("cursor", "default");
                    $("#lblemail").css("text-decoration", "none");
                }

                var str = item.mbrsince;
                var nstr = str.indexOf("/");

                if ((item.mbrsince == "  -   -") || (nstr>-1))
                    self.mbrsince(item.mbrsince);
                else
                    self.mbrsince(DateBind(item.mbrsince));
               
                var Dtm = item.dateterm;
                var nDtm = str.indexOf("/");
               
                if ((item.dateterm == "  -   -") || (nDtm>-1))
                    self.dateterm(item.dateterm);
                else
                    self.dateterm(DateBind(item.dateterm));
                
            }
        }

        self.Add = function () {
            if (self.SaveMode() == true)
                return false;

            CallDisableTabs();

            self.Oldgwno("");
            self.RetailerNo("");
            self.company("");
            self.address1("");
            self.city("");
            self.state("");
            self.zip("");
            self.country("");
            self.phone("");
            self.fax("");
            self.email("");
            self.www("");
            self.corpname("");
            self.saddress1("");
            //self.RCorpNo("");
            self.DistNo("");
            self.scity("");
            self.sstate("");
            self.szip("");
            self.scountry("");
            self.fedid_tax("");
            //self.code("");
            self.typeco("");
            self.mbrsince("");
            self.primary_("");
            //self.terminated("");
            self.dateterm("");
            self.gsplus("");
            self.emailshr("");
            self.comm_via("");
            self.QueryFilter("");

            $("#webpageLink").hide();
            $("#www").show();
            self.AddMode(true);
            self.SaveMode(true);
            self.EditMode(false);
            self.EnableDisableMode(false);
            self.EnableDisableControls(true);
            document.getElementById('company').focus();
            $("#distcode").val("");
            // $("#corplink").val("");
            $("#lblemail").css("color", "#333333");
            $("#lblemail").css("cursor", "default");
            $("#lblemail").css("text-decoration", "none");
        }

        self.txtzipsearch = function () {
            if (self.SaveMode() == true) {
                if (self.state() == "" && self.city() == "") {
                    //blurevent = true;
                    self.zip(document.getElementById('zip').value);
                    if (self.zip() == null || self.zip() == "") {
                        return false;
                    }
                    $.ajax({
                        url: "searchzip",
                        data: { getzip: self.zip() },
                        type: "POST",
                        success: function (response) {
                            if (response.Items.length > 0) {
                                self.city(response.Items[0].City);
                                self.state(response.Items[0].State);
                            }
                            else {
                                self.city("");
                                self.state("");
                            }
                        }
                    });
                }
                else {
                    return false;
                }
            }
        }

        self.txtszipsearch = function () {
            if (self.SaveMode() == true) {
                if (self.sstate() == "" && self.scity() == "") {
                    //blurevent = true;
                    self.szip(document.getElementById('szip').value);
                    if (self.szip() == null || self.szip() == "") {
                        return false;
                    }
                    $.ajax({
                        url: "searchzip",
                        data: { getzip: self.szip() },
                        type: "POST",
                        success: function (response) {
                            if (response.Items.length > 0) {
                                self.scity(response.Items[0].City);
                                self.sstate(response.Items[0].State);
                            }
                            else {
                                self.scity("");
                                self.sstate("");
                            }
                        }
                    });
                }
                else {
                    return false;
                }
            }
        }

        self.Edit = function () {
            self.AddMode(false);
            self.SaveMode(true);
            self.EditMode(false);
            self.EnableDisableMode(false);
            self.EnableDisableControls(true);

            CallDisableTabs();

            //if (self.terminated() == "True") {
            //    document.getElementById("Terminated").checked = true;
            //} else {
            //    document.getElementById("Terminated").checked = false;
            //}
            if (self.gsplus() == "True") {
                document.getElementById("GroSource").checked = true;
            } else {
                document.getElementById("GroSource").checked = false;
            }
            $("#webpageLink").hide();
            $("#www").show();
            document.getElementById('company').focus();
        }

        self.Save = function () {
            if (self.company() == null || self.company() == "") {
                $.msgBox({
                    title: "Gro Group",
                    content: "Please enter the company",
                    type: "info",
                    buttons: [{ value: "Ok" }],
                    afterClose: function (result) {
                        document.getElementById('company').focus();
                    }
                });
                return false;
            }
            //if (self.phone() == null || self.phone() == "") {
            //    $.msgBox({
            //        title: "Gro Group",
            //        content: "Please enter the Phone",
            //        type: "info",
            //        buttons: [{ value: "Ok" }],
            //        afterClose: function (result) {
            //            document.getElementById('phone').focus();
            //        }
            //    });
            //    return false;
            //}
            if (self.phone().length < 12) {
                $.msgBox({
                    title: "Gro Group",
                    content: "Please enter the Valid Phone no",
                    type: "info",
                    buttons: [{ value: "Ok" }],
                    afterClose: function (result) {
                        document.getElementById('phone').focus();
                    }
                });
                return false;
            }
            if (self.fax() != null && self.fax() != "") {
                if (self.fax().length < 12) {
                    $.msgBox({
                        title: "Gro Group",
                        content: "Please enter the Valid Fax no",
                        type: "info",
                        buttons: [{ value: "Ok" }],
                        afterClose: function (result) {
                            document.getElementById('fax').focus();
                        }
                    });
                    return false;
                }
            }
            if (self.email() != null && self.email() != "") {
                if (!ValidateEmail(self.email())) {
                    $.msgBox({
                        title: "Gro Group", content: "Invalid Email",
                        afterClose: function (result) {
                            document.getElementById('email').select();
                        }
                    });
                    return false;
                }
            }
            if (self.mbrsince() != null && self.mbrsince() != "") {
                var isvalidate = isValidDate(self.mbrsince());
                if (isvalidate == false) {
                    $.msgBox({
                        title: "Gro Group",
                        content: "Please enter the valid Date Joined",
                        type: "info",
                        buttons: [{ value: "Ok" }],
                        afterClose: function (result) {
                            document.getElementById('Member').focus();
                        }
                    });
                    return false;
                }
            }
            if (self.dateterm() != null && self.dateterm() != "") {
                var isTerminatedvalidate = isValidDate(self.dateterm());
                if (isTerminatedvalidate == false) {
                    $.msgBox({
                        title: "Gro Group",
                        content: "Please enter the valid Date Terminated",
                        type: "info",
                        buttons: [{ value: "Ok" }],
                        afterClose: function (result) {
                            document.getElementById('TerminatedDate').focus();
                        }
                    });
                    return false;
                }
            }

            $.ajax({
                url: "ValidateRetailerCompany",
                data: { company: self.company(), AddMode: self.AddMode(), RetailerNo: RetailerNo },
                type: "POST",
                async: false,
                success: function (response) {
                    if (response.Items == true) {
                        $.msgBox({
                            title: "Gro Group", content: "Company already exists",
                            afterClose: function (result) {
                                self.company("");
                                $("#company").focus();
                                return false;
                            }
                        });
                    }
                    else {
                        SaveRetailer();
                    }
                }
            });

        }

        function SaveRetailer() {
            RetailArray = [];
            RetailArray = {
                Oldgwno: self.Oldgwno(),
                RetailerNo: self.RetailerNo(),
                company: self.company(),
                address1: self.address1(),
                city: self.city(),
                state: self.state(),
                zip: self.zip(),
                country: self.country(),
                phone: self.phone(),
                fax: self.fax(),
                email: self.email(),
                www: self.www(),
                corpname:self.corpname(),
                saddress1: self.saddress1(),
                scity: self.scity(),
                sstate: self.sstate(),
                //code: self.code(),
                //terminated: self.terminated(),
                dateterm: self.dateterm(),
                szip: self.szip(),
                scountry: self.scountry(),
               // RCorpNo: self.RCorpNo(),
                DistNo: self.DistNo(),
                emailshr: self.emailshr(),
                gsplus: self.gsplus(),
                primary_: self.primary_(),
                mbrsince: self.mbrsince(),
                typeco: self.typeco(),
                fedid_tax: self.fedid_tax(),
                comm_via: self.comm_via(),
                QueryFilter: self.QueryFilter()
            }
            $.ajax({
                url: "SaveRetailer",
                data: { ObjRetailArray: JSON.stringify(RetailArray), IsAddMode: self.AddMode() },
                type: "POST",
                success: function (response) {
                    if (response.ItemMsg != undefined && response.ItemMsg != null) {
                        alert("Gro Group", response.ItemMsg);
                    } else {
                        self.txtRetailNo(response.Items);
                        FillRetailer();
                    }

                    self.AddMode(false);
                    self.EditMode(true);
                    self.SaveMode(false);
                    self.EnableDisableMode(true);
                    self.EnableDisableControls(false);

                }
            });

            CallEnableTabs();
        }

        self.Cancel = function () {
            if (self.SaveMode() != true)
                return false;
            alertconfirm("Are You Sure", "Do you want to cancel current changes ?", self.confirmcancel, true, false);
        }

        self.confirmcancel = function () {
            self.AddMode(false);
            self.EditMode(true);
            self.SaveMode(false);
            self.EnableDisableMode(true);
            self.EnableDisableControls(false);

            CallEnableTabs();

            FillRetailer();
            //if (self.terminated() == "True") {
            //    document.getElementById("Terminated").checked = true;
            //} else {
            //    document.getElementById("Terminated").checked = false;
            //}
            if (self.gsplus() == "True") {
                document.getElementById("GroSource").checked = true;
            } else {
                document.getElementById("GroSource").checked = false;
            }
            $("a#webpageLink").attr("href", "http://" + self.www());
            if (self.www() != "") {
                $("#webpageLink").show();
                $("#www").hide();
            }
            else {
                $("#webpageLink").hide();
                $("#www").show();
            }
        }

        self.Delete = function () {
            if (self.SaveMode() == true)
                return false;
            alerterror("Denied", "Record cannot be deleted");
            //if (self.SaveMode() == true)
            //    return false;
            //alertconfirm("Delete", "Are you sure you want to delete this record ?", self.confirmdelete, false, true);
        }

        self.confirmdelete = function () {
            $.ajax({
                url: "DeleteRetailer",
                data: { GwNo: self.RetailerNo() },
                type: "POST",
                success: function (response) {
                    FillRetailer();
                }
            });
        }

        self.optionselect = function (item, element) {
            var obj = element.currentTarget.childNodes[0];
            self.selectedvalue(obj.value);
            self.txtname(element.currentTarget.childNodes[0].innerHTML);
            document.getElementById('Retailsearch').focus();
        }

        self.searchselecteditem = function (item, element) {
            if (element == "txtRetailsrch") {
                self.txtRetailNo(item[1]);
                FillRetailer();
                self.txtsearch("");
            }
        }


    }

    function CallDisableTabs() {
        var tablist = document.getElementsByClassName('ui-tabs-nav ui-helper-reset');
        var lis = document.getElementsByClassName("ui-state-default ui-corner-top");
        var list = document.getElementsByClassName("ui-tabs-active ui-state-active");
        for (var i = 0; i < lis.length; i++) {
            if (list[0].childNodes[0].id != lis[i].childNodes[0].id) {
                $('#' + tablist[0].id + '').addClass("nallowed");
                $('#' + lis[i].childNodes[0].id + '').addClass("event-none");
            }
        }

    }
    function CallEnableTabs() {

        var tablist = document.getElementsByClassName('ui-tabs-nav ui-helper-reset');
        var lis = document.getElementsByClassName("ui-state-default ui-corner-top");
        var list = document.getElementsByClassName("ui-tabs-active ui-state-active");
        for (var i = 0; i < lis.length; i++) {
            $('#' + tablist[0].id + '').removeClass("nallowed");
            $('#' + lis[i].childNodes[0].id + '').removeClass("event-none");
        }
    }

</script>

<div id="tabs" class="tabbedwidget tab-primary">
    <ul id="tablist">
        <li><a href="#tab1" id="Retcomp">Retailers</a></li>
        <li><a href="#tab2" id="RetCont">Contacts</a></li>
        <li><a href="#tab3" id="Notes">Notes</a></li>
    </ul>
    <div id="tab1">
        <center>
            <div class="row-fluid" style="max-width:1300px !important; text-align:left;">
                <div class="row-fluid">
                    <div class="span4">
                        <ul class="list-nostyle list-inline tooltipsample">
                            <li><a data-placement="bottom" data-rel="tooltip" data-original-title="Add" title="Add" class="btn btn-primary" id="btnAdd" data-bind="enable:EditMode"><i class="icon-file icon-white"></i></a></li>
                            <li data-bind="visible: EditMode"><a data-placement="bottom" data-rel="tooltip" data-original-title="Edit" title="Edit" class="btn btn-warning" id="btnEdit"><i class="icon-edit icon-white"></i></a></li>
                            <li data-bind="visible: SaveMode"><a data-placement="bottom" data-rel="tooltip" data-original-title="Save" title="Save" class="btn btn-warning" id="btnSave"><i class="icon-list-alt icon-white"></i></a></li>
                            <li><a data-placement="bottom" data-rel="tooltip" data-original-title="Delete" title="Delete" class="btn btn-danger" id="btnDelete" data-bind="enable:EditMode"><i class="icon-remove icon-white"></i></a></li>
                            <li><a data-placement="bottom" data-rel="tooltip" data-original-title="Cancel" title="Cancel" class="btn btn-info" id="btnCancel" data-bind="enable:SaveMode"><i class="iconsweets-arrowleft iconsweets-white"></i></a></li>
                        </ul>
                    </div>
                    <div class="span4">
                        <div class="searchmenu">
                            <a href="#" class="btn btn-primary searchmenubtn" style="width:3px !important; height:1px; float: none !important;" id="btnsearch"><i style="margin-top:-8px; margin-left:-5px;" class="iconsweets-magnifying iconsweets-white"></i></a>
                            <ul class="searchmenu-content" data-bind="foreach: $root.CmbRetailersrch">
                                <li style="cursor: pointer; list-style-type:none;" data-bind="click: $root.optionselect"><a data-bind="text: Display_FName,value:Field_Name"></a></li>
                            </ul>
                        </div>
                        <input type="text" class="input-large" id="Retailsearch" style="font-weight:normal" data-bind="disable:EnableDisableControls,value: txtsearch,event:{blur:txtRetailsearch,dblclick: Retailsearchdbclick},attr:{placeholder:txtname}" />
                    </div>
                </div>

                <div class="row-fluid">
                    <div class="span6">
                        <div class="widgetbox">
                            <h4 class="widgettitle"><span>COMPANY PROFILES - </span><span>Old GwNo:</span><span id="oldgwno" data-bind="text:Oldgwno"></span></h4>
                            <div class="padding-style" style="border: 1px #BCD8F3 solid;">
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span3 mob-span">No/Company</label>
                                        <input id="RetailerNo" type="text" class="input-small mob-text" maxlength="4" data-bind="disable: EnableDisableMode,value: RetailerNo" readonly="readonly" />
                                        <input id="company" type="text" class="input-medium mob-text" style="width:52%;" maxlength="50" required data-bind="disable: EnableDisableMode,value:company" />
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span3 mob-span">Mail Address</label>
                                        <input id="address1" type="text" style="width:312px" class="input-large" maxlength="35" data-bind="disable: EnableDisableMode,value:address1" />
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span3 mob-span">City</label>
                                        <input id="city" type="text" style="width:312px" maxlength="20" class="input-large" data-bind="disable: EnableDisableMode, value:city" />
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span3 mob-span">St-Pr/Zip/Country</label>
                                        <input id="state" type="text" style="width:35px;" maxlength="2" class="mob-state-width" data-bind="disable: EnableDisableMode,value:state" />
                                        <input id="zip" type="text" class="mob-zip-width" style="width:80px;" maxlength="10" onkeypress="return numbers(this);" data-bind="disable: EnableDisableMode,value:zip,event:{blur:txtzipsearch}" />
                                        <select id="country" style="background-color:white;width:120px" class="mob-cntry-width" data-bind="disable:EnableDisableMode, options:CmbCountry,optionsText:'descript',optionsValue:'entry',value:country"></select>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span3 mob-span">Phone</label>
                                        <input id="phone" type="text" class="input-medium mob-text" onkeypress="return numbersonly(this,event,true);" maxlength="12" data-bind="disable: EnableDisableMode,value:phone" />
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span3 mob-span">Fax</label>
                                        <input id="fax" type="text" class="input-medium mob-text" onkeypress="return numbersonly(this,event,true);" maxlength="12" data-bind="disable: EnableDisableMode,value:fax" />
                                    </div>

                                </div>

                                <div class="row-fluid">
                                    <div class="span12">
                                        <label id="lblemail" class="span3 mob-span">Company Email</label>
                                        <input id="email" type="text" class="input-large" style="width:312px" maxlength="40" data-bind="disable: EnableDisableMode,value:email" />
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span3 mob-span">Website</label>
                                        <input id="www" type="text" class="input-large" style="width:312px" maxlength="40" data-bind="disable: EnableDisableMode,value:www" />
                                        <a id="webpageLink" target="_blank" href=""><span data-bind="text: www"></span></a>
                                    </div>
                                </div>

                                <div class="row-fluid mob-disp-none" style="margin-top: 30px;"></div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span3 mob-span">Type</label>
                                        <select style="background-color:white;width:100px" class="input-large" data-bind="disable:EnableDisableMode, options:Cmbcode,optionsText:'descript',optionsValue:'entry',value:primary_"></select>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span7 mob-wd-full">
                                        <label class="span5 mob-span">Federal Tax ID</label>
                                        <input id="Fed" type="text" class="input-small mob-text" maxlength="12" data-bind="disable: EnableDisableMode, value:fedid_tax" />
                                        @*<input id="Tax" type="text" class="mob-text" style="width:15%" maxlength="4" data-bind="disable: EnableDisableMode, value:code" />*@
                                    </div>
                                    <div class="span5 mob-wd-full" style="margin-left:0px;">
                                        <label class="span6 mob-span">Type of Company</label>
                                        <select style="background-color:white;width:122px" class="input-large" data-bind="disable:EnableDisableMode, options:Cmbtype,optionsText:'descript',optionsValue:'entry',value:typeco"></select>
                                    </div>
                                </div>

                                <div class="row-fluid mob-disp-none" style="margin-top: 30px;"></div>
                                <div class="row-fluid">
                                    <label class="span12" style="font-weight:bold">Communication Methods for Retailer</label>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span6 mob-span">Share Email with Growers</label>
                                        <select id="emailshr" class="input-medium mob-cmb" data-bind="disable:EnableDisableMode, options:CmbShrEmail,optionsText:'descript',optionsValue:'entry',value:emailshr"></select>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span6 mob-span">Communicate Via</label>
                                        <select id="comm_via" class="input-medium mob-cmb" data-bind="disable:EnableDisableMode, options:Cmbcommvia,optionsText:'descript',optionsValue:'entry',value:comm_via"></select>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                    <div class="span6">
                        <div class="widgetbox">
                            <h4 class="widgettitle">CORPORATE INFORMATION</h4>
                            <div class="padding-style" style="border: 1px #BCD8F3 solid;">
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span4 mob-span">Corp. Name</label>
                                        @*<select id="corplink" class="input-xlarge mob-cmb" style="width:52%;" data-bind="disable:EnableDisableMode, options:CmbCoorporate,optionsText:'gwcorp',optionsValue:'RcorpNo',value:RCorpNo"></select>*@
                                        <input id="corplink" type="text" class="input-large" style="width:60%;" maxlength="35" data-bind="disable: EnableDisableMode,value:corpname" />
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span4 mob-span">Ship Address</label>
                                        <input id="saddress1" type="text" class="input-large" style="width:312px" maxlength="35" data-bind="disable: EnableDisableMode,value:saddress1" />
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span4 mob-span">City</label>
                                        <input id="scity" type="text" class="input-large" style="width:312px" maxlength="20" data-bind="disable: EnableDisableMode, value:scity" />
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span4 mob-span"> St-Pr/Zip/Country</label>
                                        <input id="sstate" type="text" style="width:35px;" maxlength="2" class="mob-state-width" data-bind="disable: EnableDisableMode,value:sstate" />
                                        <input id="szip" type="text" class="mob-zip-width" style="width:80px;" maxlength="10" onkeypress="return numbers(this);" data-bind="disable: EnableDisableMode,value:szip,event:{blur:txtszipsearch}" />
                                        <select id="scountry" style="background-color:white;width:120px" class="mob-cntry-width" data-bind="disable:EnableDisableMode, options:CmbScountry,optionsText:'descript',optionsValue:'entry',value:scountry"></select>
                                    </div>
                                </div>
                                <div class="row-fluid mob-disp-none" style="margin-top: 60px;"></div>
                                <div class="row-fluid">
                                    <label class="span12" style="font-weight:bold">Company Information</label>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span4 mob-span">Date Joined</label>
                                        <input id="Member" type="text" class="input-small" maxlength="12" placeholder="MM/DD/YYYY" data-bind="disable: EnableDisableMode, value:mbrsince" />
                                    </div>

                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span4 mob-span">Distributor  Affiliation</label>
                                        <select id="distcode" class="input-xlarge mob-cmb" data-bind="disable:EnableDisableMode, options:CmbDistributor,optionsText:'company',optionsValue:'DistNo',value:DistNo"></select>
                                    </div>

                                </div>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <label class="span4 mob-span">Date Terminated</label>      @*for="Terminated"*@
                                        @*<input id="Terminated" class="input-small" type="checkbox" maxlength="1" data-bind="disable: EnableDisableMode, checked:terminated" />*@
                                        <input id="TerminatedDate" type="text" class="input-small" maxlength="12" placeholder="MM/DD/YYYY" data-bind="disable: EnableDisableMode, value:dateterm" />
                                    </div>

                                </div>

                                <div class="row-fluid">
                                    <div class="span12">
                                        <label for="GroSource" class="span4 mob-span">GroSource Plus Customer</label>
                                        <input id="GroSource" class="input-small" type="checkbox" maxlength="1" data-bind="disable: EnableDisableMode, checked: gsplus" />
                                    </div>

                                </div>

                                <div class="row-fluid mob-disp-none" style="margin-top: 90px;"></div>
                                <div class="row-fluid">
                                    <div class="span6"></div>
                                    <div class="span6 mob-wd-full">
                                        <label class="span7 mob-span">Optional Query Field</label>
                                        <input id="txtqryfilter" class="input-small" style="width:70px;" type="text" maxlength="1" tabindex="47" data-bind="disable: EnableDisableMode, value: QueryFilter" /> @*//, value: codea*@
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </center>
    </div>
    <div id="tab2">
        <div class="frameheight" style="height: 800px">
            <iframe id="iContacts" width="98%" height="100%" scrolling="no" frameborder="0"></iframe>
        </div>
    </div>
    <div id="tab3">
        <div class="frameheight" style="height: 800px">
            <iframe id="inotes" width="98%" height="100%" scrolling="no" frameborder="0"></iframe>
        </div>
    </div>
</div>

